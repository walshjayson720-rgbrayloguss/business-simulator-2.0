<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Business Simulator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
 margin:0;
 background:#0e0e0e;
 color:#fff;
 font-family:Arial, sans-serif;
}
header{
 background:#1a1a1a;
 padding:10px;
 display:flex;
 justify-content:space-between;
 position:sticky;
 top:0;
 z-index:1000;
}
button{
 padding:10px;
 margin:4px 0;
 width:100%;
 background:#2ecc71;
 border:none;
 border-radius:6px;
 font-size:14px;
}
button:disabled{background:#555;}
.section{
 padding:10px;
 padding-top:60px;
}
.box{
 background:#141414;
 border:1px solid #333;
 border-radius:8px;
 padding:10px;
 margin-bottom:12px;
}
.hidden{display:none;}

#statusBox{
 position:fixed;
 left:10px;
 top:80px;
 width:220px;
 background:#111;
 border:1px solid #333;
 padding:8px;
}
#progressBar{
 width:100%;
 height:10px;
 background:#333;
 margin-top:6px;
}
#progress{
 width:0%;
 height:100%;
 background:#2ecc71;
}

#notifications{
 position:fixed;
 left:10px;
 bottom:10px;
 width:260px;
}
.note{
 background:#1b1b1b;
 border-left:4px solid #2ecc71;
 padding:8px;
 margin-top:6px;
 opacity:0;
 transform:translateX(-20px);
 animation:slideIn 0.3s forwards, fadeOut 0.5s forwards 3s;
}
@keyframes slideIn{to{opacity:1;transform:translateX(0);}}
@keyframes fadeOut{to{opacity:0;transform:translateX(-20px);}}
</style>
</head>

<body>

<header>
<div>
Money: $<span id="money">0</span><br>
Time: <span id="time">0:00</span>
</div>
<div>
<button onclick="toggleInventory()">Inventory</button>
</div>
</header>

<div id="statusBox">
<div id="statusText">Idle</div>
<div id="progressBar"><div id="progress"></div></div>
</div>

<div id="notifications"></div>

<div class="section">

<div class="box">
<h3>Manual Actions</h3>
<button id="woodBtn" onclick="manual('wood')">Chop Wood</button>
<button id="leafBtn" onclick="manual('leaves')">Collect Leaves</button>
<button id="stoneBtn" onclick="manual('stone')">Mine Stone</button>
</div>

<div class="box">
<h3>Structures</h3>
<button onclick="buyStructure('smallMine')">Small Mine ($300) +5 stone/min</button>
<button onclick="buyStructure('bigMine')">Big Mine ($1200) +15 stone/min</button>
<button onclick="buyStructure('treeFarm')">Tree Farm ($400) +6 wood/min</button>
</div>

<div class="box">
<h3>Employees</h3>
<button onclick="buyEmployee('miner')">Miner ($200) +3 stone/min</button>
<button onclick="buyEmployee('lumber')">Lumberjack ($200) +3 wood/min</button>
<button onclick="buyEmployee('collector')">Collector ($200) +3 leaves/min</button>
</div>

<div class="box">
<h3>Sell</h3>
<button onclick="sell('wood',3)">Sell Wood ($3)</button>
<button onclick="sell('leaves',1)">Sell Leaves ($1)</button>
<button onclick="sell('stone',5)">Sell Stone ($5)</button>
</div>

<div class="box">
<h3>Production Rates</h3>
<pre id="rpm"></pre>
</div>

<div class="box">
<h3>Event Log</h3>
<pre id="eventLog"></pre>
</div>

</div>

<div id="inventory" class="section hidden">
<div class="box">
<h3>Inventory</h3>
<pre id="inv"></pre>
<button onclick="toggleInventory()">Close</button>
</div>
</div>

<script>
let game = JSON.parse(localStorage.getItem("bizSave")) || {
 money:100,
 start:Date.now(),
 inventory:{wood:0,leaves:0,stone:0},
 structures:{smallMine:0,bigMine:0,treeFarm:0},
 employees:{miner:0,lumber:0,collector:0}
};

const STRUCTURES={
 smallMine:{cost:300,stone:5},
 bigMine:{cost:1200,stone:15},
 treeFarm:{cost:400,wood:6}
};

const EMPLOYEES={
 miner:{cost:200,stone:3},
 lumber:{cost:200,wood:3},
 collector:{cost:200,leaves:3}
};

let prodMultiplier = 1;
let eventHistory = [];

function notify(t){
 let n=document.createElement("div");
 n.className="note";
 n.textContent=t;
 document.getElementById("notifications").appendChild(n);
 setTimeout(()=>n.remove(),3600);
}

function logEvent(t){
 eventHistory.unshift("â€¢ "+t);
 if(eventHistory.length>20)eventHistory.pop();
 document.getElementById("eventLog").textContent=eventHistory.join("\n");
 notify(t);
}

function tempBoost(mult){
 prodMultiplier *= mult;
 logEvent("Production modified x"+mult+" (2 min)");
 setTimeout(()=>{
  prodMultiplier /= mult;
  logEvent("Production returned to normal");
 },120000);
}

let busy=false;
function manual(type){
 if(busy)return;
 busy=true;
 const txt={
  wood:["Chopping tree","Tree chopped"],
  leaves:["Collecting leaves","Leaves collected"],
  stone:["Mining stone","Stone mined"]
 };
 document.getElementById("statusText").textContent=txt[type][0];
 ["woodBtn","leafBtn","stoneBtn"].forEach(id=>document.getElementById(id).disabled=true);
 let p=0,bar=document.getElementById("progress");
 let i=setInterval(()=>{p+=6.7;bar.style.width=p+"%";},100);
 setTimeout(()=>{
  clearInterval(i);
  bar.style.width="100%";
  game.inventory[type]+=1;
  document.getElementById("statusText").textContent=txt[type][1];
  busy=false;
  ["woodBtn","leafBtn","stoneBtn"].forEach(id=>document.getElementById(id).disabled=false);
  save();
 },1500);
}

function buyStructure(id){
 let s=STRUCTURES[id];
 if(game.money<s.cost)return;
 game.money-=s.cost;
 game.structures[id]++;
 logEvent("Structure purchased: "+id);
 save();
}

function buyEmployee(id){
 let e=EMPLOYEES[id];
 if(game.money<e.cost)return;
 game.money-=e.cost;
 game.employees[id]++;
 logEvent("Employee hired: "+id);
 save();
}

function sell(type,price){
 let a=Math.floor(game.inventory[type]);
 if(a<=0)return;
 game.inventory[type]=0;
 game.money+=a*price;
 logEvent("Sold "+type+" for $"+(a*price));
 save();
}

function resPerMin(){
 let r={wood:0,leaves:0,stone:0};
 for(let s in game.structures){
  let d=STRUCTURES[s];
  for(let k in d)if(k!=="cost")r[k]+=d[k]*game.structures[s];
 }
 for(let e in game.employees){
  let d=EMPLOYEES[e];
  for(let k in d)if(k!=="cost")r[k]+=d[k]*game.employees[e];
 }
 r.wood*=prodMultiplier;
 r.leaves*=prodMultiplier;
 r.stone*=prodMultiplier;
 return r;
}

const EVENTS = [
 {t:"Investor funding +$200", f:()=>game.money+=200},
 {t:"Equipment breakdown -$150", f:()=>game.money=Math.max(0,game.money-150)},
 {t:"Worker motivation +20% production", f:()=>tempBoost(1.2)},
 {t:"Worker strike -25% production", f:()=>tempBoost(0.75)},
 {t:"New tools +10 stone", f:()=>game.inventory.stone+=10},
 {t:"Storm damage -15 wood", f:()=>game.inventory.wood=Math.max(0,game.inventory.wood-15)},
 {t:"Leaf surplus +20 leaves", f:()=>game.inventory.leaves+=20},
 {t:"Supply theft -10 stone", f:()=>game.inventory.stone=Math.max(0,game.inventory.stone-10)}
];

while(EVENTS.length<100){
 EVENTS.push({
  t:Math.random()<0.5?"Minor efficiency boost +5%":"Minor inefficiency -5%",
  f:()=>tempBoost(Math.random()<0.5?1.05:0.95)
 });
}

setInterval(()=>{
 let e=EVENTS[Math.floor(Math.random()*EVENTS.length)];
 e.f();
 logEvent(e.t);
 save();
},120000);

setInterval(()=>{
 let r=resPerMin();
 game.inventory.wood+=r.wood/60;
 game.inventory.leaves+=r.leaves/60;
 game.inventory.stone+=r.stone/60;
 save();
},1000);

function toggleInventory(){
 document.getElementById("inventory").classList.toggle("hidden");
}

function save(){
 localStorage.setItem("bizSave",JSON.stringify(game));
 update();
}

function update(){
 document.getElementById("money").textContent=Math.floor(game.money);
 let r=resPerMin();
 document.getElementById("rpm").textContent=
  "Wood: "+r.wood.toFixed(1)+"/min\n"+
  "Leaves: "+r.leaves.toFixed(1)+"/min\n"+
  "Stone: "+r.stone.toFixed(1)+"/min";
 document.getElementById("inv").textContent=JSON.stringify(game.inventory,null,2);
}

setInterval(()=>{
 let s=Math.floor((Date.now()-game.start)/1000);
 document.getElementById("time").textContent=Math.floor(s/60)+":"+String(s%60).padStart(2,"0");
},1000);

update();
</script>

</body>
</html>
